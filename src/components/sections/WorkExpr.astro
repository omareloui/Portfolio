---
import TechnologyUsage from "@components/TechnologyUsage.astro";
import SectionWrapper from "@components/SectionWrapper.astro";
import ExternalIcon from "@components/ExternalIcon.astro";

const { isOdd = false } = Astro.props;

type WorkExpr = {
  from: string;
  to: undefined;
  title?: string;
  desc: string;
  company: string;
  link?: string;
  tech: string[];
};

const workExprs: WorkExpr[] = [
  {
    from: "Mar. 2023",
    to: undefined,
    title: "Back-End Developer",
    desc: "Build and maintain critical distributed systems for internal and public usage. Improve the development experience for other developers by building tools and setup systems and frameworks to be consistent and make it easier to communicate. Contribute in designing the architecture of a major project.",
    company: "Arab African International Bank",
    link: "https://aaib.com",
    tech: [
      "Microservices",
      "Go",
      "gRPC",
      "Protobuf",
      "NestJS",
      "Node",
      "ExpressJs",
      "TypeScript",
      "JavaScript",
      "RabbitMQ",
      "Jest",
      "GraphQL",
      "LDAP",
      "Docker",
      "Makefile",
      "Bazel",
      "Prettier",
      "ESLint",
      "Pug",
      "MJML",
      "Git",
      "GitLab",
    ],
  },
  {
    from: "June 2024",
    to: undefined,
    title: "Full-Stack Software Engineer",
    link: "https://whatscookin.us",
    desc: `designed and implemented application enhancements, optimized SQL queries to improve performance, and developed secure data models with ComposeDB and DID-based authentication. Using React, I enhanced front-end interactivity and migrated a Python data pipeline into a microservice architecture for seamless, real-time data integration.`,
    company: "What's Cookin",
    tech: [
      "Microservices",
      "ExpressJs",
      "Node",
      "Python",
      "ReactJs",
      "TypeScript",
      "JavaScript",
      "Docker",
      "Prettier",
      "ESLint",
      "Git",
      "GitHub",
    ],
  },
];
---

<SectionWrapper title="Work Experiences" shadowTitle="My Career" id="workexpr" isOdd={isOdd}>
  <div class="work-expr-entries">
    {
      workExprs.map(expr => (
        <div class="work-expr">
          <div class="work-expr__left">
            <p class="work-expr__duration">
              <span class="from">{expr.from}</span>â€”<span class="to">{expr.to || "Present"}</span>
            </p>
          </div>
          <div class="work-expr__right">
            <div class="work-expr__company">
              {(expr.link && (
                <a href={expr.link} target="_blank" class="gradient-text">
                  {expr.company}
                  <ExternalIcon size={16} color="var(--subtext1)" className="tablet-up" />
                </a>
              )) || <span class="gradient-text"> {expr.company} </span>}
            </div>
            <div class="work-expr__title">{expr.title}</div>
            <div class="work-expr__desc">{expr.desc}</div>
            <div class="work-expr__technologies">
              {expr.tech.map(t => (
                <TechnologyUsage tech={t} includeText={true} size="30px" />
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </div>
</SectionWrapper>

<style lang="scss">
  @use "@assets/styles/mixins.scss" as *;

  .work-expr-entries {
    display: grid;
    gap: 50px;

    .work-expr {
      display: grid;
      grid-template-columns: 1fr;

      @include tablet-up {
        grid-template-columns: 128px 1fr;
        padding: 56px 40px;
        gap: 1rem;
      }

      &__right {
        display: grid;
        gap: 4px;
      }

      &__company {
        > :where(a, span) {
          text-decoration: none;
          font-weight: bold;
          font-size: 1.4rem;
          display: inline-block;
          position: relative;

          :global(svg) {
            position: absolute;
            right: -22px;
            top: 1px;
          }
        }
      }

      &__title {
        color: var(--subtext0);
        font-weight: bold;
      }

      &__duration {
        color: var(--subtext1);
        font-size: 0.8rem;
        margin-top: 5px;
      }

      &__desc {
        margin-bottom: 10px;
      }

      &__technologies {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
    }
  }
</style>
